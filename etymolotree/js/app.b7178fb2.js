(function(e){function r(r){for(var t,i,s=r[0],l=r[1],c=r[2],d=0,p=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&p.push(o[i][0]),o[i]=0;for(t in l)Object.prototype.hasOwnProperty.call(l,t)&&(e[t]=l[t]);u&&u(r);while(p.length)p.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,r=0;r<a.length;r++){for(var n=a[r],t=!0,s=1;s<n.length;s++){var l=n[s];0!==o[l]&&(t=!1)}t&&(a.splice(r--,1),e=i(i.s=n[0]))}return e}var t={},o={app:0},a=[];function i(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,r,n){i.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,r){if(1&r&&(e=i(e)),8&r)return e;if(4&r&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var t in e)i.d(n,t,function(r){return e[r]}.bind(null,t));return n},i.n=function(e){var r=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(r,"a",r),r},i.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},i.p="/etymolotree/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=r,s=s.slice();for(var c=0;c<s.length;c++)r(s[c]);var u=l;a.push([0,"chunk-vendors"]),n()})({0:function(e,r,n){e.exports=n("cd49")},"0214":function(e,r,n){"use strict";var t=n("c6a1"),o=n.n(t);o.a},1101:function(e,r,n){},"3acb":function(e,r,n){},"5a35":function(e,r,n){},"5c0b":function(e,r,n){"use strict";var t=n("9c0c"),o=n.n(t);o.a},7841:function(e,r,n){"use strict";var t=n("3acb"),o=n.n(t);o.a},"9c0c":function(e,r,n){},c6a1:function(e,r,n){},cd49:function(e,r,n){"use strict";n.r(r);n("e260"),n("e6cf"),n("cca6"),n("a79d");var t=n("2b0e"),o=function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"nav"}},[n("router-link",{attrs:{to:"/"}},[e._v("Home")]),e._v(" | "),n("router-link",{attrs:{to:"/about"}},[e._v("About")])],1),n("router-view")],1)},a=[],i=(n("5c0b"),n("2877")),s={},l=Object(i["a"])(s,o,a,!1,null,null,null),c=l.exports,u=n("8c4f"),d=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"home"},[t("img",{attrs:{alt:"Vue logo",src:n("cf05")}}),t("HelloWorld",{attrs:{msg:"Welcome to Your Vue.js App"}})],1)},p=[],g=function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("div",{staticClass:"hello"},[n("h1",[e._v(e._s(e.msg))])])},f=[],h=t["a"].extend({name:"HelloWorld",props:{msg:String}}),v=h,m=(n("e141"),Object(i["a"])(v,g,f,!1,null,"08c16a9e",null)),w=m.exports,x={name:"Home",components:{HelloWorld:w}},y=x,_=Object(i["a"])(y,d,p,!1,null,null,null),b=_.exports,k=function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("div",{staticClass:"dictionary"},[e.langName?n("h1",[e._v(e._s(e.langName)+": "+e._s(e.word))]):e._e(),e.error?n("p",{staticClass:"error"},[e._v(e._s(e.error))]):e._e(),e.trees.length>0?[e._l(e.trees,(function(r,t){return[n("h2",{key:t},[e._v("Etymology "+e._s(t+1))]),n("WordTree",{key:r.word.words[0]+"-"+t,attrs:{language:r.language,word:r.word,parents:r.parents,children:r.children,extra:r.extra,meaning:r.meaning}})]}))]:e._e(),0!=e.trees.length||e.error?e._e():n("div",{staticClass:"loader"})],2)},C=[],j=(n("caad"),n("4d63"),n("ac1f"),n("25f0"),n("2532"),n("5319"),n("2ca0"),n("b85c")),W=n("d4ec"),E=n("bee2"),O=function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("div",{staticClass:"tree"},[e.parents?n("ul",{staticClass:"parents"},[e._l(e.parents,(function(r,t){return[r.prefix?n("div",{key:t+"-prefix",staticClass:"prefix"},[e._v(e._s(r.prefix))]):e._e(),n("li",{key:t},[n("WordTree",{attrs:{word:r.word,parents:r.parents,children:r.children,prefix:r.prefix}})],1)]}))],2):e._e(),n("Word",{attrs:{langCode:e.word.langCode,words:e.word.words,meaning:e.word.meaning}}),e.children?n("ul",{staticClass:"children"},e._l(e.children,(function(e,r){return n("li",{key:r},[n("WordTree",{attrs:{word:e.word,parents:e.parents,children:e.children,prefix:e.prefix}})],1)})),0):e._e()],1)},$=[],N=function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("div",{staticClass:"element",class:{active:e.link}},[e.link?n("router-link",{attrs:{to:e.link}},[n("div",{staticClass:"padding"},[e.language?n("p",{staticClass:"language"},[n("strong",[e._v(e._s(e.language))])]):e._e(),n("p",[n("strong",[e._l(e.words,(function(r,n){return[e._v(" "+e._s(r)),n!=e.words.length-1?[e._v(", ")]:e._e()]}))],2)]),e.meaning?n("p",[e._v(e._s(e.meaning))]):e._e()])]):n("div",{staticClass:"padding inactive"},[e.language?n("p",{staticClass:"language"},[n("strong",[e._v(e._s(e.language))])]):e._e(),n("p",[n("strong",[e._l(e.words,(function(r,n){return[e._v(" "+e._s(r)),n!=e.words.length-1?[e._v(", ")]:e._e()]}))],2)]),e.meaning?n("p",[e._v(e._s(e.meaning))]):e._e()])],1)},T=[],L=(n("9911"),n("96cf"),n("1da1"));function S(e){return e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}var R=t["a"].extend({name:"Word",props:{langCode:String,words:Array,meaning:String},data:function(){return{link:"",language:""}},methods:{findLink:function(){var e=this;return Object(L["a"])(regeneratorRuntime.mark((function r(){var n,t,o,a,i,s,l,c,u,d,p,g,f,h,v,m;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:n=Object(j["a"])(e.words),r.prev=1,n.s();case 3:if((t=n.n()).done){r.next=38;break}return o=t.value,r.next=7,e.$http.get("https://en.wiktionary.org/w/api.php",{params:{origin:"*",format:"json",action:"expandtemplates",text:"{{link|"+e.langCode+"|"+o+"}}",prop:"wikitext"}});case 7:if(a=r.sent,i=a.data.expandtemplates.wikitext,!i.startsWith('<strong class="error">')){r.next=11;break}return r.abrupt("return");case 11:if(s=/\[\[(.+)#(x3a;)?(.+?)(\/(.+))?\|/,l=s.exec(i),null!==l){r.next=15;break}return r.abrupt("continue",36);case 15:return c=l[5]||l[1],e.language=l[3],u=o.startsWith("*")?"Reconstruction:"+e.language+"/"+c:c,r.next=20,e.$http.get("https://en.wiktionary.org/w/api.php",{params:{origin:"*",format:"json",action:"query",prop:"revisions",titles:u,rvslots:"*",rvprop:"content",formatversion:"2"}});case 20:if(d=r.sent,p=d.data.query.pages[0],!p.missing){r.next=24;break}return r.abrupt("continue",36);case 24:if(g=p.revisions[0].slots.main.content,f=new RegExp("=="+e.language+"==.*?(?=(\n==[^=])|$)","gs"),h=f.exec(g),null!==h){r.next=29;break}return r.abrupt("continue",36);case 29:if(v=h[0],o.replace("*","")==c){r.next=34;break}if(m=new RegExp("(head=|\\|)"+S(o)+"(\\||})"),m.exec(v)){r.next=34;break}return r.abrupt("continue",36);case 34:return e.link="/dictionary/"+e.langCode+"/"+o,r.abrupt("return");case 36:r.next=3;break;case 38:r.next=43;break;case 40:r.prev=40,r.t0=r["catch"](1),n.e(r.t0);case 43:return r.prev=43,n.f(),r.finish(43);case 46:case"end":return r.stop()}}),r,null,[[1,40,43,46]])})))()}},mounted:function(){this.findLink()}}),P=R,I=(n("7841"),Object(i["a"])(P,N,T,!1,null,null,null)),A=I.exports,H=t["a"].extend({name:"WordTree",components:{Word:A},props:{parents:Array,prefix:String,word:Object,children:Array}}),U=H,q=(n("0214"),Object(i["a"])(U,O,$,!1,null,null,null)),M=q.exports,J=function(){function e(r){Object(W["a"])(this,e),this.text=r,this.index=0}return Object(E["a"])(e,[{key:"remaining",value:function(){return this.text.substr(this.index)}},{key:"advance",value:function(e){this.index+=e}}]),e}();function V(e){return e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}var D={name:"Page2",components:{WordTree:M},data:function(){return{lang:"en",word:"hello",langName:void 0,wordCode:void 0,trees:[],error:void 0}},created:function(){this.load()},watch:{$route:function(){this.load()}},methods:{errorNoConnection:function(){this.error="Error: could not connect to the Wiktionary API"},errorUnknwonLanguageCode:function(e){this.error="Error: unknown language code '"+e+"'"},errorUnknwonLanguageWord:function(e,r){this.error="Error: unknown "+e+" word '"+r+"'"},errorNoEtymology:function(e){this.error="Error: no etymology found for '"+e+"'"},createInflectionTree:function(e){var r=/{{.*of(\|.*)*\|([^=}]+)(\|.+=.+)*}}/gm,n=r.exec(e);if(!n)return!1;for(var t=[],o=[];n;n=r.exec(e))o.includes(n[2])||(o.push(n[2]),t.push({word:{language:this.langName,langCode:this.lang,words:[n[2]]}}));return this.trees.push({parents:t,word:this.createRootWord(e)}),!0},createEtymologyTree:function(e,r,n){var t,o=[],a=e.remaining(),i=/{{(compound|suffix|prefix)\|[^|]*\|([^|]*)\|([^|]*)}}/,s=i.exec(a);if(s){var l=s[1],c=s[2],u=s[3];"suffix"==l?u="-"+u:"prefix"==l&&(c+="-"),o.push({word:{langCode:this.lang,words:[c]}}),o.push({prefix:"+",word:{langCode:this.lang,words:[u]}}),t="compound",e.advance(s.index+s[0].length),a=e.remaining()}var d=/{{((m|cog)|((inh|der)\|[^|}]*))\|([^|}]*)(\|([^|}]*))?(\|[^|}]*)??(\|([^|}]*))??(\|(t|pos)=([^|}]*))?}}/,p=d.exec(a);if(null===p)return o.length>0?o:void 0;for(;p;p=d.exec(a)){var g=a.substr(0,p.index);if(g.includes(". ")||g.includes(".\n")){if(!r)return 0==o.length?void 0:o;t=void 0}var f=g.includes(" or ")||g.includes(" or\n")||g.toLowerCase().includes("alternativ"),h=g.includes(" + ")||g.includes(" +\n"),v=!f&&!h&&g.toLowerCase().includes("from "),m=v&&g.includes(" all from ");if(void 0!==t&&v){var w=this.createEtymologyTree(e,!1,o);if(void 0!==w)if(m){var x,y=Object(j["a"])(o);try{for(y.s();!(x=y.n()).done;){var _=x.value;_.parents=w}}catch(E){y.e(E)}finally{y.f()}}else o[o.length-1].parents=w;t=void 0,a=e.remaining()}else if(e.advance(p.index+p[0].length),a=e.remaining(),!(g.toLowerCase().includes("displaced")||g.includes(" equivalent ")||g.toLowerCase().includes("whence "))){var b=p[4]||p[2];if("cog"!==b){if("m"===b){if(g.toLowerCase().includes("cognate")&&(t="cog"),"cog"==t)continue;(v||0==o.length)&&(t=b)}else t=b;var k=p[5],C=p[7]||p[10],W=p[13]||p[10];W==C&&(W=void 0),"t"==p[12]&&(W="“"+W+"”"),void 0!==C&&(C=C.replace(/\[\[/g,""),C=C.replace(/\]\]/g,"")),!f&&!h&&o.length>0&&!o[o.length-1].word.meaning&&o[o.length-1].word.langCode==k?(o[o.length-1].word.words.push(C),o[o.length-1].word.meaning=W):(v||f||h||void 0!==t)&&o.push({prefix:f?"or":h?"+":void 0,word:{langCode:k,words:[C],meaning:W}})}else t="cog"}}return 0==o.length?void 0:o},createRootWord:function(e){return{langCode:this.lang,words:[this.word]}},load:function(){var e=this;this.trees=[],this.lang=this.$route.params.lang,this.word=this.$route.params.word,document.title=this.word,this.langName=void 0,this.wordCode=void 0,this.error=void 0,this.$http.get("https://en.wiktionary.org/w/api.php",{params:{origin:"*",format:"json",action:"expandtemplates",text:"{{link|"+this.lang+"|"+this.word+"}}",prop:"wikitext"}}).then((function(r){var n=r.data.expandtemplates.wikitext;if(!n.startsWith('<strong class="error">')){var t=/\[\[(.+)#(x3a;)?(.+?)(\/(.+))?\|/,o=t.exec(n);e.wordCode=o[5]||o[1],e.langName=o[3];var a=e.word.startsWith("*")?"Reconstruction:"+e.langName+"/"+e.wordCode:e.wordCode;return e.$http.get("https://en.wiktionary.org/w/api.php",{params:{origin:"*",format:"json",action:"query",prop:"revisions",titles:a,rvslots:"*",rvprop:"content",formatversion:"2"}}).then((function(r){var n=r.data.query.pages[0];if(n.missing)e.errorUnknwonLanguageWord(e.langName,e.word);else{var t=n.revisions[0].slots.main.content,o=new RegExp("=="+V(e.langName)+"==.*?(?=(\n==[^=])|$)","gs"),a=o.exec(t);if(null!==a){var i=a[0],s=new RegExp("(head=|\\|)"+V(e.word)+"(\\||})","g");if(e.word.replace("*","")==e.wordCode||s.exec(i)){s.lastIndex=0;var l=/(?<=Etymology( [0-9])?=+\n)([\s\S]*?)(?=(=+Etymology)|$)/g;e.trees=[];var c=l.exec(i);if(null!==c){for(var u=!1,d=/[\s\S]*?(?=(==)|$)/;c;c=l.exec(i)){var p=c[0];if(e.word.replace("*","")==e.wordCode||s.exec(p)){s.lastIndex=0;var g=d.exec(p)[0],f=e.createEtymologyTree(new J(g),!0,[]);void 0!==f?(u=!0,e.trees.push({parents:f,word:e.createRootWord(p)})):u=e.createInflectionTree(p)||u}else s.lastIndex=0}u||e.errorNoEtymology(e.word)}else e.createInflectionTree(i)||e.errorNoEtymology(e.word)}else e.errorUnknwonLanguageWord(e.langName,e.word)}else e.errorUnknwonLanguageWord(e.langName,e.word)}}))}e.errorUnknwonLanguageCode(e.lang)})).catch(this.errorNoConnection)}}},Y=D,z=(n("d03f"),Object(i["a"])(Y,k,C,!1,null,null,null)),B=z.exports;t["a"].use(u["a"]);var F=[{path:"/",name:"Home",component:b},{path:"/dictionary/:lang/:word",name:"Dictionary",component:B}],G=new u["a"]({mode:"hash",base:"/etymolotree/",routes:F}),K=G,Q=n("2f62");t["a"].use(Q["a"]);var X=new Q["a"].Store({state:{},mutations:{},actions:{},modules:{}}),Z=n("bc3a"),ee=n.n(Z),re=n("a7fe"),ne=n.n(re);t["a"].use(ne.a,ee.a),t["a"].config.productionTip=!1,new t["a"]({router:K,store:X,render:function(e){return e(c)}}).$mount("#app")},cf05:function(e,r,n){e.exports=n.p+"img/logo.82b9c7a5.png"},d03f:function(e,r,n){"use strict";var t=n("1101"),o=n.n(t);o.a},e141:function(e,r,n){"use strict";var t=n("5a35"),o=n.n(t);o.a}});
//# sourceMappingURL=app.b7178fb2.js.map